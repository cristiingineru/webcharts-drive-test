# Webcharts Reference

> Web components for plotting engineering and scientific data with a focus on performance.

**Table of Contents**

[Introduction](#introduction)
| [Using webcharts](#Using webcharts)
| [Graph](#ni-cartesian-graph)
| [Chart](#ni-chart)
| [Intensity Graph](#ni-intensity-graph)
| [Cartesian Axes](#ni-cartesian-axis)
| [Plots](#ni-cartesian-plot)
| [Plot renderer](#ni-cartesian-plot-renderer)


## Introduction ##

Webcharts is a collection of [web components](https://www.webcomponents.org/introduction)
for plotting engineering and scientific data, with a focus on performance.

## Using webcharts ##

Webcharts is distributed through npm with the package name **ni-webcharts**.

Add webcharts to your app:

    npm install --save ni-webcharts

Add webcharts to a webpage:

```html
<link rel="stylesheet" href="node_modules/ni-webcharts/Styles/niControlStyles.css" />
<link rel="import" href="node_modules/ni-webcharts/sources/webcharts.html"/>
<script type="text/javascript" src="node_modules/webcomponents-lite/webcomponents-lite.js"></script>
```


## ni-cartesian-graph

> A custom element that allows to graph one or multiple data sets.

An ni-cartesian-graph is a declarative way, that uses custom elements, to add a graph
to a web page. Specify your data sets using the value attribute and customize how
the data is renderended using nested custom elements such as *ni-cartesian-axis*,
*ni-cartesian-plot*, *ni-cartesian-plot-renderer* or *ni-cursor*.

Example showing how you can render a graph of prime number versus fibonacci numbers.
```html
<ni-cartesian-graph value="[[2, 3, 5, 7, 11, 13, 17, 19],
                          [0, 1, 1, 2, 3, 5, 8, 13]]">
  <ni-cartesian-axis show label="Index" auto-scale axis-position="bottom"></ni-cartesian-axis>
  <ni-cartesian-axis show label="Value" auto-scale axis-position="left"></ni-cartesian-axis>
  <ni-cartesian-plot show label="Prime Numbers">
    <ni-cartesian-plot-renderer line-width="2" line-stroke="red">
    </ni-cartesian-plot-renderer>
  </ni-cartesian-plot>
  <ni-cartesian-plot show label="Fibonacci Numbers">
    <ni-cartesian-plot-renderer line-width="2" line-stroke="blue">
    </ni-cartesian-plot-renderer>
  </ni-cartesian-plot>
</ni-cartesian-graph>
```



## ni-chart

> A custom element that allows to chart one or multiple data sets.

The difference between a graph and a chart is that a graph plots directly the data
sets provided but the chart uses a buffer of historical values, called a
HistoryBuffer for data handling.

As you append new values to the charts' History buffer the chart is updated as
needed, on the next browser animation frame.

Example:

```html
<ni-chart id="chart1" bufferSize="1024">
    <ni-cartesian-axis show show-tick-labels label="Time" axis-position="bottom" auto-scale></ni-cartesian-axis>
    <ni-cartesian-axis show show-tick-labels label="Amplitude"  axis-position="left" auto-scale></ni-cartesian-axis>
    <ni-cartesian-plot show label="Plot 1">
      <ni-cartesian-plot-renderer line-width="2" line-stroke="#a84716"></ni-cartesian-plot-renderer>
    </ni-cartesian-plot>
</ni-chart>

<script>
  var historyBuffer = $('#chart1').getHistoryBuffer();

  // write 1000 values into the chart's history buffer
  for (var i = 0; i < 10; i++) {
    historyBuffer.push(Math.sin(i));
    i += 0.01;
  }
</script>
```

The HistoryBuffer API is described [here](historyBuffer.md).


### ni-chart properties

**buffer-size** (number) - the size of the chart history buffer 

### ni-chart methods

**setHistoryBuffer(historyBuffer)** - changes the internal history buffer
   of the chart to the provided one

**getHistoryBuffer()** - returns a reference to the internal history
   buffer of the chart


## ni-intensity-graph

> A custom element that allows to plot a 2D data set as a gradient map.

An ni-intensity-graph is a declarative way, that uses custom elements, to add an
intensity graph to a web page. Specify your data sets using the value attribute
and customize how the data is renderended using nested custom elements such as
*ni-cartesian-axis*, *ni-color-scale*.

Example:
```html
<ni-intensity-graph id="graph1" value="[[0.1, 0.2], [0.3, 0.4], [0.5, 0.6]]">
    <ni-cartesian-axis label="X" show show-label axis-position="bottom" show-tick-labels auto-scale grid-lines></ni-cartesian-axis>
    <ni-cartesian-axis label="Y" show show-label axis-position="left" show-tick-labels auto-scale grid-lines></ni-cartesian-axis>
    <ni-color-scale label="Color Scale" show show-label
        markers='[{"value":0,"color":"rgba(0,0,0,1)"},{"value":50,"color":"rgba(0,0,255,1)"},{"value":100,"color":"rgba(255,255,255,1)"}]'
        high-color="rgba(255,255,255,1)" low-color="rgba(0,0,0,1)">
    </ni-color-scale>
</ni-intensity-graph>
```



## ni-cartesian-axis

> Add axes to a graph.

```html
<ni-cartesian-graph>
  <ni-cartesian-axis show show-tick-labels grid-lines show-label label="Axis 1" axis-position='bottom'>
  </ni-cartesian-axis>
  <ni-cartesian-axis show show-tick-labels grid-lines show-label label="Axis 2" axis-position='top'>
  </ni-cartesian-axis>
  <ni-cartesian-axis show show-tick-labels grid-lines show-label label="Axis 3" axis-position='left'>
  </ni-cartesian-axis>
</ni-cartesian-graph>
```
Multiple vertical and horizontal axes can be added to a graph and configured.

Axes can be placed to the right, left and on top or bottom of a graph, can use a
logarithmic scale if desired and can show time. A relative time format is supported
along with the absolute time format.

The minimum and maximum value of an axis can be specified. Autoscaling according
to the data ranges dispayed is also possible.


### ni-cartesian-axis properties

**show** (boolean) - if true the axis will be visible. Default: false

**label** (string) - the name of the axis. Default: '' 

**axis-position** (string) - the position of the axis. Default: 'left'
 Accepted values: 'top', 'bottom', 'left' and 'right'


**show-label** (boolean) - if true the axis label will be visible.
       Default: false 

**minimum** (number) - the minimum axis value. Default: 0

**maximum** (number) - the maximum axis value. Default: 1

**auto-scale** (boolean) - if true the axis will adapt to the data
       ranges of the plots assigned to that axis. Default: false

**log-scale** (boolean) - if true the axis will be a log axis. Default: false

**format** (string) - the format of the tick labels. Default: false
TODO: document the format


**show-tick-labels** (boolean) - if true the axis tick labels will be
       visible. Default: false

**grid-lines** (boolean) - if true the grid lines for the axis will
       be visible. Default: false


## ni-cartesian-plot

> A custom element that, along with a nested ni-cartesian-plot-renderer describes
the way a data plot is rendered.

A plot is the graphic representation of a data set. A graph or chart can show
simultaneously multiple data sets (plots). To customize how a data set, or plot
is rendered use ni-cartesian-plot elements nested inside a graph or chart
element.

```html
<ni-cartesian-graph>
  ...
    add axes here
  ...
  <ni-cartesian-plot show label="plot 1" xaxis=0 yaxis=0>
    add an ni-cartesian-plot-renderer here
  </ni-cartesian-plot>
</ni-cartesian-graph>
```


### ni-cartesian-plot properties 

**show** (boolean) - if true the plot will be shown. Default: false 

**label** (string) - the name of the plot. Default: '' 

**xaxis** (number) - the X axis that this plot will use. Default: 0, the first X axis 

**yaxis** (number) - the Y axis that this plot will use. Default: 0, the first Y axis 

**enable-hover** (boolean) - if true, when the mouse hovers close to a point on the plot
       a tooltip with the point value will be shown 

**hover-format** (string) - specifies the format of the text shown in the tooltip. TODO: document the format


## ni-cartesian-plot-renderer

> Describes the way a plot is rendered

The four ways to render a plot are the line renderer, the area fill renderer,
the points renderer and the bar renderer. You can combine these in any way you
like for a single plot and different plots can have different renderers.

The fastest one is the line renderer and this is the recomended one for large
data sets and if you care about performance.

The render can be further customized by using the renderer properties.


### ni-cartesian-plot-renderer properties 

**line-stroke** (string) - the color of the line drawn. Default: '#ff0000'.
       Accepted values: a CSS color string or an empty string. If an empty string
       is passed the line rendering for the plot is disabled.
       

**line-width** (number) - the width of the line. Use 1 for maximum
       performance as thicker lines can be slower, depending on the browser and
       the graphic card used. Default: 1

**line-style** (string) - the style of the line drawn. Default: 'solid'.
       Accepted values: *'solid'*, *'dot'*, *'mediumdash'*, *'dashdot'* and *'largedash'*
       

**area-fill** (string) - the color of the area fill drawn under/over
       the line. Default: ''.
       Accepted values: a CSS color string or an empty string. If an empty string
       is passed the area fill for the plot is disabled.
       

**area-base-line** (string) - determines the direction the area fill.
Default: 'zero'. Accepted values:

* 'zero': fill the line towards 0
* '-infinity': fill the line towards -Infinity. TODO: this doesn't work yet
* 'infinity': fill the line towards Infinity. TODO: this doesn't work yet


**bar-fill** (string) - the color of the bars drawn. Default: ''.
       Accepted values: a CSS color string or an empty string. If an empty string
       is passed the bars rendering for the plot is disabled.
       

**point-color** (string) - the color of the points drawn. Default: ''.
       Accepted values: a CSS color string or an empty string. If an empty string
       is passed the points rendering for the plot is disabled.
       

**point-size** (number) - the size of the points drawn. Default: 5.

**point-shape** (string) - determines the shape of the points.
       Default: 'ellipse'. Accepted values: 'ellipse', 'square', 'diamond',
       'triangle', 'cross'
       


## ni-color-scale

> A color scale added to an intensity graph is used to show configure the color
gradients.

```html
<ni-intensity-graph>
  <ni-cartesian-axis ...></ni-cartesian-axis>
  <ni-cartesian-axis ...></ni-cartesian-axis>
  <ni-color-scale show show-label label="Color Scale" low-color="blue" high-color="red">
  </ni-cartesian-axis>
</ni-cartesian-graph>
```

A single color scale can be added to an intensity graph to visualize and control
the maping from values to the color gradient displayed.

Color scales are only supported by intensity graphs.


### ni-color-scale properties

**label** (string) - the name of the color scale. Default: '' 

**show** (boolean) - if true the color scale will be visible. Default: false 

**show-label** (boolean) - if true the color scale label will be visible. Default: false 

**axis-position** (string) - the position of the color scale. Default: 'right'.
       Accepted values: *'left'*, *'right'* 

**high-color** (string) - the color assigned to the values bigger than
       the color scale maximum. Default: '#ffffff'.
       Accepted values: a CSS color string

**low-color** (string) - the color assigned to the values smaller than
       the color scale minimum. Default: '#000000'.
       Accepted values: a CSS color string

**markers** (string) - the color gradient used to map values to colorScaleAxis. Default: ''.
       TODO: document the gradient format, better default value

**auto-scale** (boolean) - if true the color gradient will strech to adapt to the
       range of the data set provided. Default: false

**minimum** (number) - the minimum axis value. Default: 0

**maximum** (number) - the maximum axis value. Default: 1
